<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helmet List</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <th>Brand</th>
            <th>Model</th>
            <th>Size</th>
            <th>Color</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Helmet Type</th>
            <th>Visor Type</th>
        </tr>
        {% for helmet in helmets %}
        <tr>
            <td>{{ helmet.brand }}</td>
            <td>{{ helmet.model }}</td>
            <td>{{ helmet.size }}</td>
            <td>{{ helmet.color }}</td>
            <td>{{ helmet.price }}</td>
            <td>{{ helmet.quantity }}</td>
            <td>{{ helmet.helmet_type }}</td>
            <td>{{ helmet.visor_type }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>

<script>
    helmets = Helmet.objects.all()

    document.addEventListener("DOMContentLoaded", function () {
        formatTablePrices("{{ table_id }}");
    });

    function formatTablePrices(tableId) {
        let table = document.getElementById(tableId);
        if (table) {
            let rows = table.querySelectorAll("tbody tr");
            rows.forEach((row) => {
                let priceCell = row.cells[4]; // 7th column (index 6)
                if (priceCell) {
                    let rawPrice = priceCell.textContent.trim();
                    if (!rawPrice.includes("₱")) {
                        priceCell.textContent = formatPrice(rawPrice);
                    }
                }
            });
        }
    }

    function formatPrice(price) {
        let number = parseFloat(price.replace(/[^\d.]/g, "")); // Remove non-numeric characters
        return isNaN(number) ? price : "₱ " + number.toLocaleString();
    }
</script>